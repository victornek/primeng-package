{"version":3,"sources":["../../src/app/components/megamenu/megamenu.ts"],"names":["MegaMenu","el","renderer","cd","this","orientation","autoZIndex","baseZIndex","prototype","ngAfterContentInit","_this","templates","forEach","item","getType","startTemplate","template","endTemplate","onCategoryMouseEnter","event","menuitem","disabled","preventDefault","activeItem","onCategoryClick","url","command","originalEvent","items","unbindDocumentClickListener","bindDocumentClickListener","itemClick","getColumnClass","columnClass","length","documentClickListener","nativeElement","contains","target","markForCheck","document","addEventListener","removeEventListener","Component","args","selector","changeDetection","ChangeDetectionStrategy","OnPush","encapsulation","ViewEncapsulation","None","ElementRef","Renderer2","ChangeDetectorRef","Input","ContentChildren","PrimeTemplate","NgModule","imports","CommonModule","RouterModule","RippleModule","exports","declarations"],"mappings":"olBA+GI,SAAAA,EAAmBC,EAAuBC,EAA4BC,GAAnDC,KAAAH,GAAAA,EAAuBG,KAAAF,SAAAA,EAA4BE,KAAAD,GAAAA,EAhB7DC,KAAAC,YAAsB,aAEtBD,KAAAE,YAAsB,EAEtBF,KAAAG,WAAqB,SAc9BP,EAAAQ,UAAAC,mBAAA,WAAA,IAAAC,EAAAN,KACIA,KAAKO,UAAUC,SAAQ,SAACC,GACpB,OAAOA,EAAKC,WACR,IAAK,QACDJ,EAAKK,cAAgBF,EAAKG,SAC9B,MAEA,IAAK,MACDN,EAAKO,YAAcJ,EAAKG,cAMxChB,EAAAQ,UAAAU,qBAAA,SAAqBC,EAAOC,GACpBA,EAASC,SACTF,EAAMG,iBAINlB,KAAKmB,aACLnB,KAAKmB,WAAaH,IAI1BpB,EAAAQ,UAAAgB,gBAAA,SAAgBL,EAAON,GACfA,EAAKQ,SACLF,EAAMG,kBAILT,EAAKY,KACNN,EAAMG,iBAGNT,EAAKa,SACLb,EAAKa,QAAQ,CACTC,cAAeR,EACfN,KAAMA,IAIVA,EAAKe,QACDxB,KAAKmB,YAAcnB,KAAKmB,aAAeV,GACvCT,KAAKmB,WAAa,KAClBnB,KAAKyB,gCAGLzB,KAAKmB,WAAaV,EAClBT,KAAK0B,gCAKjB9B,EAAAQ,UAAAuB,UAAA,SAAUZ,EAAON,GACTA,EAAKQ,SACLF,EAAMG,kBAILT,EAAKY,KACNN,EAAMG,iBAGNT,EAAKa,SACLb,EAAKa,QAAQ,CACTC,cAAeR,EACfN,KAAMA,IAIdT,KAAKmB,WAAa,OAGtBvB,EAAAQ,UAAAwB,eAAA,SAAeZ,GACX,IACIa,EACJ,OAFab,EAASQ,MAAQR,EAASQ,MAAMM,OAAQ,GAGjD,KAAK,EACDD,EAAa,mBACjB,MAEA,KAAK,EACDA,EAAa,mBACjB,MAEA,KAAK,EACDA,EAAa,mBACjB,MAEA,KAAK,EACDA,EAAa,mBACjB,MAEA,QACIA,EAAa,oBAIrB,OAAOA,GAGXjC,EAAAQ,UAAAsB,0BAAA,WAAA,IAAApB,EAAAN,KACSA,KAAK+B,wBACN/B,KAAK+B,sBAAwB,SAAChB,GACtBT,EAAKT,KAAOS,EAAKT,GAAGmC,cAAcC,SAASlB,EAAMmB,UACjD5B,EAAKa,WAAa,KAClBb,EAAKmB,8BACLnB,EAAKP,GAAGoC,iBAIhBC,SAASC,iBAAiB,QAASrC,KAAK+B,yBAIhDnC,EAAAQ,UAAAqB,4BAAA,WACQzB,KAAK+B,wBACLK,SAASE,oBAAoB,QAAStC,KAAK+B,uBAC3C/B,KAAK+B,sBAAwB,gCAlOxCQ,EAAAA,UAASC,KAAA,CAAC,CACPC,SAAU,aACV7B,SAAU,k2PA2EV8B,gBAAiBC,EAAAA,wBAAwBC,OACzCC,cAAeC,EAAAA,kBAAkBC,y1CApFVC,EAAAA,kBAAiBC,EAAAA,iBAAsDC,EAAAA,oDAyF7FC,EAAAA,qBAEAA,EAAAA,0BAEAA,EAAAA,2BAEAA,EAAAA,0BAEAA,EAAAA,0BAEAA,EAAAA,yBAEAC,EAAAA,gBAAeZ,KAAA,CAACa,EAAAA,wBA6IrB,iCALCC,EAAAA,SAAQd,KAAA,CAAC,CACNe,QAAS,CAACC,EAAAA,aAAaC,EAAAA,aAAaC,EAAAA,cACpCC,QAAS,CAAC/D,EAAS6D,EAAAA,cACnBG,aAAc,CAAChE","sourcesContent":["import {NgModule,Component,ElementRef,Input,Renderer2,ChangeDetectionStrategy, ViewEncapsulation, ChangeDetectorRef, AfterContentInit, ContentChildren, QueryList, TemplateRef} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\nimport {MegaMenuItem,MenuItem, PrimeTemplate} from 'primeng/api';\r\nimport {RouterModule} from '@angular/router';\r\nimport {RippleModule} from 'primeng/ripple';  \r\n\r\n@Component({\r\n    selector: 'p-megaMenu',\r\n    template: `\r\n        <div [class]=\"styleClass\" [ngStyle]=\"style\"\r\n            [ngClass]=\"{'p-megamenu p-component':true,'p-megamenu-horizontal': orientation == 'horizontal','p-megamenu-vertical': orientation == 'vertical'}\">\r\n            <div class=\"p-megamenu-start\" *ngIf=\"startTemplate\">\r\n                <ng-container *ngTemplateOutlet=\"startTemplate\"></ng-container>\r\n            </div>\r\n            <ul class=\"p-megamenu-root-list\" role=\"menubar\">\r\n                <ng-template ngFor let-category [ngForOf]=\"model\">\r\n                    <li *ngIf=\"category.separator\" class=\"p-menu-separator\" [ngClass]=\"{'p-hidden': category.visible === false}\">\r\n                    <li *ngIf=\"!category.separator\" [ngClass]=\"{'p-menuitem':true,'p-menuitem-active':category==activeItem, 'p-hidden': category.visible === false}\"\r\n                        (mouseenter)=\"onCategoryMouseEnter($event, category)\">\r\n                        <a *ngIf=\"!category.routerLink\" [href]=\"category.url||'#'\" [attr.target]=\"category.target\" [attr.title]=\"category.title\" [attr.id]=\"category.id\" (click)=\"onCategoryClick($event, category)\" [attr.tabindex]=\"category.tabindex ? category.tabindex : '0'\"\r\n                            [ngClass]=\"{'p-menuitem-link':true,'p-disabled':category.disabled}\" [ngStyle]=\"category.style\" [class]=\"category.styleClass\" pRipple>\r\n                            <span class=\"p-menuitem-icon\" *ngIf=\"category.icon\" [ngClass]=\"category.icon\"></span>\r\n                            <span class=\"p-menuitem-text\" *ngIf=\"category.escape !== false; else categoryHtmlLabel\">{{category.label}}</span>\r\n                            <ng-template #categoryHtmlLabel><span class=\"p-menuitem-text\" [innerHTML]=\"category.label\"></span></ng-template>\r\n                            <span *ngIf=\"category.items\" class=\"p-submenu-icon pi\" [ngClass]=\"{'pi-angle-down':orientation=='horizontal','pi-angle-right':orientation=='vertical'}\"></span>\r\n                        </a>\r\n                        <a *ngIf=\"category.routerLink\" [routerLink]=\"category.routerLink\" [queryParams]=\"category.queryParams\" [routerLinkActive]=\"'p-menuitem-link-active'\" [routerLinkActiveOptions]=\"category.routerLinkActiveOptions||{exact:false}\" [attr.tabindex]=\"category.tabindex ? category.tabindex : '0'\" \r\n                            [attr.target]=\"category.target\" [attr.title]=\"category.title\" [attr.id]=\"category.id\"\r\n                            (click)=\"onCategoryClick($event, category)\" [ngClass]=\"{'p-menuitem-link':true,'p-disabled':category.disabled}\" [ngStyle]=\"category.style\" [class]=\"category.styleClass\"\r\n                            [fragment]=\"category.fragment\" [queryParamsHandling]=\"category.queryParamsHandling\" [preserveFragment]=\"category.preserveFragment\" [skipLocationChange]=\"category.skipLocationChange\" [replaceUrl]=\"category.replaceUrl\" [state]=\"category.state\" pRipple>\r\n                            <span class=\"p-menuitem-icon\" *ngIf=\"category.icon\" [ngClass]=\"category.icon\"></span>\r\n                            <span class=\"p-menuitem-text\" *ngIf=\"category.escape !== false; else categoryHtmlRouteLabel\">{{category.label}}</span>\r\n                            <ng-template #categoryHtmlRouteLabel><span class=\"p-menuitem-text\" [innerHTML]=\"category.label\"></span></ng-template>\r\n                        </a>\r\n                        <div class=\"p-megamenu-panel\" *ngIf=\"category.items\">\r\n                            <div class=\"p-megamenu-grid\">\r\n                                <ng-template ngFor let-column [ngForOf]=\"category.items\">\r\n                                    <div [class]=\"getColumnClass(category)\">\r\n                                        <ng-template ngFor let-submenu [ngForOf]=\"column\">\r\n                                            <ul class=\"p-megamenu-submenu\" role=\"menu\">\r\n                                                <li class=\"p-megamenu-submenu-header\">\r\n                                                    <span *ngIf=\"submenu.escape !== false; else submenuHtmlLabel\">{{submenu.label}}</span>\r\n                                                    <ng-template #submenuHtmlLabel><span [innerHTML]=\"submenu.label\"></span></ng-template>\r\n                                                </li>\r\n                                                <ng-template ngFor let-item [ngForOf]=\"submenu.items\">\r\n                                                    <li *ngIf=\"item.separator\" class=\"p-menu-separator\" [ngClass]=\"{'p-hidden': item.visible === false}\" role=\"separator\">\r\n                                                    <li *ngIf=\"!item.separator\" class=\"p-menuitem\" [ngClass]=\"{'p-hidden': item.visible === false}\" role=\"none\">\r\n                                                        <a *ngIf=\"!item.routerLink\" role=\"menuitem\" [href]=\"item.url||'#'\" class=\"p-menuitem-link\" [attr.target]=\"item.target\" [attr.title]=\"item.title\" [attr.id]=\"item.id\" [attr.tabindex]=\"item.tabindex ? item.tabindex : '0'\"\r\n                                                            [ngClass]=\"{'p-disabled':item.disabled}\" (click)=\"itemClick($event, item)\" pRipple>\r\n                                                            <span class=\"p-menuitem-icon\" *ngIf=\"item.icon\" [ngClass]=\"item.icon\"></span>\r\n                                                            <span class=\"p-menuitem-text\" *ngIf=\"item.escape !== false; else htmlLabel\">{{item.label}}</span>\r\n                                                            <ng-template #htmlLabel><span class=\"p-menuitem-text\" [innerHTML]=\"item.label\"></span></ng-template>\r\n                                                        </a>\r\n                                                        <a *ngIf=\"item.routerLink\" role=\"menuitem\" [routerLink]=\"item.routerLink\" [queryParams]=\"item.queryParams\" [routerLinkActive]=\"'p-menuitem-link-active'\" [attr.tabindex]=\"item.tabindex ? item.tabindex : '0'\"\r\n                                                            [routerLinkActiveOptions]=\"item.routerLinkActiveOptions||{exact:false}\" class=\"p-menuitem-link\" \r\n                                                             [attr.target]=\"item.target\" [attr.title]=\"item.title\" [attr.id]=\"item.id\"\r\n                                                            [ngClass]=\"{'p-disabled':item.disabled}\" (click)=\"itemClick($event, item)\"\r\n                                                            [fragment]=\"item.fragment\" [queryParamsHandling]=\"item.queryParamsHandling\" [preserveFragment]=\"item.preserveFragment\" [skipLocationChange]=\"item.skipLocationChange\" [replaceUrl]=\"item.replaceUrl\" [state]=\"item.state\" pRipple>\r\n                                                            <span class=\"p-menuitem-icon\" *ngIf=\"item.icon\" [ngClass]=\"item.icon\"></span>\r\n                                                            <span class=\"p-menuitem-text\" *ngIf=\"item.escape !== false; else htmlRouteLabel\">{{item.label}}</span>\r\n                                                            <ng-template #htmlRouteLabel><span class=\"p-menuitem-text\" [innerHTML]=\"item.label\"></span></ng-template>\r\n                                                        </a>\r\n                                                    </li>\r\n                                                </ng-template>\r\n                                            </ul>\r\n                                        </ng-template>\r\n                                    </div>\r\n                                </ng-template>\r\n                            </div>\r\n                        </div>\r\n                    </li>\r\n                </ng-template>\r\n                <div class=\"p-megamenu-end\" *ngIf=\"endTemplate; else legacy\">\r\n                    <ng-container *ngTemplateOutlet=\"endTemplate\"></ng-container>\r\n                </div>\r\n                <ng-template #legacy>\r\n                    <div class=\"p-megamenu-end\">\r\n                        <ng-content></ng-content>\r\n                    </div>\r\n                </ng-template>\r\n            </ul>\r\n        </div>\r\n    `,\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n    encapsulation: ViewEncapsulation.None,\r\n    styleUrls: ['./megamenu.css']\r\n})\r\nexport class MegaMenu implements AfterContentInit {\r\n\r\n    @Input() model: MegaMenuItem[];\r\n\r\n    @Input() style: any;\r\n\r\n    @Input() styleClass: string;\r\n    \r\n    @Input() orientation: string = 'horizontal';\r\n\r\n    @Input() autoZIndex: boolean = true;\r\n\r\n    @Input() baseZIndex: number = 0;\r\n\r\n    @ContentChildren(PrimeTemplate) templates: QueryList<any>;\r\n    \r\n    activeItem: any;\r\n\r\n    documentClickListener: any;\r\n\r\n    startTemplate: TemplateRef<any>;\r\n\r\n    endTemplate: TemplateRef<any>;\r\n                \r\n    constructor(public el: ElementRef, public renderer: Renderer2, public cd: ChangeDetectorRef) {}\r\n    \r\n    ngAfterContentInit() {\r\n        this.templates.forEach((item) => {\r\n            switch(item.getType()) {\r\n                case 'start':\r\n                    this.startTemplate = item.template;\r\n                break;\r\n\r\n                case 'end':\r\n                    this.endTemplate = item.template;\r\n                break;\r\n            }\r\n        });\r\n    }\r\n\r\n    onCategoryMouseEnter(event, menuitem: MegaMenuItem) {\r\n        if (menuitem.disabled) {\r\n            event.preventDefault();\r\n            return;\r\n        }\r\n\r\n        if (this.activeItem) {\r\n            this.activeItem = menuitem;\r\n        }\r\n    }\r\n\r\n    onCategoryClick(event, item: MenuItem | MegaMenuItem) {\r\n        if (item.disabled) {\r\n            event.preventDefault();\r\n            return;\r\n        }\r\n\r\n        if (!item.url) {\r\n            event.preventDefault();\r\n        }\r\n\r\n        if (item.command) {\r\n            item.command({\r\n                originalEvent: event,\r\n                item: item\r\n            });\r\n        }\r\n\r\n        if (item.items) {\r\n            if (this.activeItem && this.activeItem === item) {\r\n                this.activeItem = null;\r\n                this.unbindDocumentClickListener();\r\n            }\r\n            else {\r\n                this.activeItem = item;\r\n                this.bindDocumentClickListener();\r\n            }\r\n        }\r\n    }\r\n    \r\n    itemClick(event, item: MenuItem | MegaMenuItem) {\r\n        if (item.disabled) {\r\n            event.preventDefault();\r\n            return;\r\n        }\r\n        \r\n        if (!item.url) {\r\n            event.preventDefault();\r\n        }\r\n        \r\n        if (item.command) {\r\n            item.command({\r\n                originalEvent: event,\r\n                item: item\r\n            });\r\n        }\r\n                        \r\n        this.activeItem = null;\r\n    }\r\n    \r\n    getColumnClass(menuitem: MegaMenuItem) {\r\n        let length = menuitem.items ? menuitem.items.length: 0;\r\n        let columnClass;\r\n        switch(length) {\r\n            case 2:\r\n                columnClass= 'p-megamenu-col-6';\r\n            break;\r\n            \r\n            case 3:\r\n                columnClass= 'p-megamenu-col-4';\r\n            break;\r\n            \r\n            case 4:\r\n                columnClass= 'p-megamenu-col-3';\r\n            break;\r\n            \r\n            case 6:\r\n                columnClass= 'p-megamenu-col-2';\r\n            break;\r\n                        \r\n            default:\r\n                columnClass= 'p-megamenu-col-12';\r\n            break;\r\n        }\r\n        \r\n        return columnClass;\r\n    }\r\n\r\n    bindDocumentClickListener() {\r\n        if (!this.documentClickListener) {\r\n            this.documentClickListener = (event) => {\r\n                if (this.el && !this.el.nativeElement.contains(event.target)) {\r\n                    this.activeItem = null;\r\n                    this.unbindDocumentClickListener();\r\n                    this.cd.markForCheck();\r\n                }\r\n            };\r\n\r\n            document.addEventListener('click', this.documentClickListener);\r\n        }\r\n    }\r\n\r\n    unbindDocumentClickListener() {\r\n        if (this.documentClickListener) {\r\n            document.removeEventListener('click', this.documentClickListener);\r\n            this.documentClickListener = null;\r\n        }\r\n    }\r\n}\r\n\r\n@NgModule({\r\n    imports: [CommonModule,RouterModule,RippleModule],\r\n    exports: [MegaMenu,RouterModule],\r\n    declarations: [MegaMenu]\r\n})\r\nexport class MegaMenuModule { }"]}