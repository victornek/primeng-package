{"version":3,"file":"primeng-ripple.umd.js","sources":["../../src/app/components/ripple/ripple.ts","../../src/app/components/ripple/primeng-ripple.ts"],"sourcesContent":["import { NgModule, Directive, AfterViewInit, ElementRef, NgZone, OnDestroy, Optional } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { DomHandler } from 'primeng/dom';\r\nimport { PrimeNGConfig } from 'primeng/api';\r\n\r\n@Directive({\r\n    selector: '[pRipple]',\r\n    host: {\r\n        '[class.p-ripple]': 'true'\r\n    }\r\n})\r\nexport class Ripple implements AfterViewInit, OnDestroy {\r\n\r\n    constructor(public el: ElementRef, public zone: NgZone, @Optional() public config: PrimeNGConfig) { }\r\n\r\n    animationListener: any;\r\n\r\n    mouseDownListener: any;\r\n\r\n    ngAfterViewInit() {\r\n        if (this.config && this.config.ripple) {\r\n            this.zone.runOutsideAngular(() => {\r\n                this.create();\r\n    \r\n                this.mouseDownListener = this.onMouseDown.bind(this);\r\n                this.el.nativeElement.addEventListener('mousedown', this.mouseDownListener);\r\n            });\r\n        }\r\n    }\r\n\r\n    onMouseDown(event: MouseEvent) {\r\n        let ink = this.getInk();\r\n        if (!ink || getComputedStyle(ink, null).display === 'none') {\r\n            return;\r\n        }\r\n    \r\n        DomHandler.removeClass(ink, 'p-ink-active');\r\n        if (!DomHandler.getHeight(ink) && !DomHandler.getWidth(ink)) {\r\n            let d = Math.max(DomHandler.getOuterWidth(this.el.nativeElement), DomHandler.getOuterHeight(this.el.nativeElement));\r\n            ink.style.height = d + 'px';\r\n            ink.style.width = d + 'px';\r\n        }\r\n    \r\n        let offset = DomHandler.getOffset(this.el.nativeElement);\r\n        let x = event.pageX - offset.left + document.body.scrollTop - DomHandler.getWidth(ink) / 2;\r\n        let y = event.pageY - offset.top + document.body.scrollLeft - DomHandler.getHeight(ink) / 2;\r\n    \r\n        ink.style.top = y + 'px';\r\n        ink.style.left = x + 'px';\r\n        DomHandler.addClass(ink, 'p-ink-active');\r\n    }\r\n    \r\n    getInk() {\r\n        for (let i = 0; i < this.el.nativeElement.children.length; i++) {\r\n            if (this.el.nativeElement.children[i].className.indexOf('p-ink') !== -1) {\r\n                return this.el.nativeElement.children[i];\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    resetInk() {\r\n        let ink = this.getInk();\r\n        if (ink) {\r\n            DomHandler.removeClass(ink, 'p-ink-active');\r\n        }\r\n    }\r\n\r\n    onAnimationEnd(event) {\r\n        DomHandler.removeClass(event.currentTarget, 'p-ink-active');\r\n    }\r\n\r\n    create() {\r\n        let ink = document.createElement('span');\r\n        ink.className = 'p-ink';\r\n        this.el.nativeElement.appendChild(ink);\r\n    \r\n        this.animationListener = this.onAnimationEnd.bind(this);\r\n        ink.addEventListener('animationend', this.animationListener);\r\n    }\r\n\r\n    remove() {\r\n        let ink = this.getInk();\r\n        if (ink) {\r\n            this.el.nativeElement.removeEventListener('mousedown', this.mouseDownListener);\r\n            ink.removeEventListener('animationend', this.animationListener);\r\n            DomHandler.removeElement(ink);\r\n        }\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.config && this.config.ripple) {\r\n            this.remove();\r\n        }\r\n    }\r\n}\r\n\r\n@NgModule({\r\n    imports: [CommonModule],\r\n    exports: [Ripple],\r\n    declarations: [Ripple]\r\n})\r\nexport class RippleModule { }\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["DomHandler","Directive","ElementRef","NgZone","PrimeNGConfig","Optional","NgModule","CommonModule"],"mappings":"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"}